<!DOCTYPE html>
<!--####################################################################
	THIS IS A GENERATED FILE — ANY CHANGES MADE WILL BE OVERWRITTEN

	INSTEAD CHANGE:
	source: docs/can-guides/commitment/recipes/file-navigator/file-navigator-advanced.md
	@page guides/recipes/file-navigator-advanced
######################################################################## -->
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>File Navigator | advanced recipes | Guides | CanJS — Build CRUD apps in fewer lines of code.</title>
	<meta name="description" content="This advanced guide walks you through building a file navigation widget that requests data with fetch. It takes about 45 minutes to complete.">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<meta property="og:image" content="https://www.bitovi.com/hubfs/open-source/os-canjs.png">
	<meta property="og:description" content="This advanced guide walks you through building a file navigation widget that requests data with fetch. It takes about 45 minutes to complete.">
	<meta property="og:title" content="File Navigator | advanced recipes | Guides | CanJS — Build CRUD apps in fewer lines of code.">
	<script type="application/ld+json">
		{
			"@context": "http://www.schema.org",
			"@type": "SoftwareSourceCode",
			"applicationCategory": "DeveloperApplication",
			"brand": "Bitovi",
			"category": "JavaScript Frameworks",
			"codeRepository": "https://github.com/canjs/canjs",
			"description": "This advanced guide walks you through building a file navigation widget that requests data with fetch. It takes about 45 minutes to complete.",
			"image": "https://www.bitovi.com/hubfs/open-source/os-canjs.png",
			"license": "https://github.com/canjs/canjs/blob/master/license.md",
			"logo": "https://www.bitovi.com/hubfs/open-source/os-canjs.png",
			"name": "File Navigator | advanced recipes | Guides | CanJS — Build CRUD apps in fewer lines of code.",
			"programmingLanguage": "JavaScript",
			"softwareVersion" : "5.33.3"
		}
	</script>
	
		<link rel="stylesheet" type="text/css" href="../../static/bundles/bit-docs-site/static.css">
		<link rel="shortcut icon" sizes="16x16 24x24 32x32 48x48 64x64" href="/docs/images/canjs_favicon.ico">
		<link rel="apple-touch-icon" sizes="57x57" href="../../../docs/images/canjs_favicon_57x57.png">
		<link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../../docs/images/canjs_favicon_57x57.png">
		<link rel="apple-touch-icon" sizes="72x72" href="../../../docs/images/canjs_favicon_72x72.png">
		<link rel="apple-touch-icon" sizes="114x114" href="../../../docs/images/canjs_favicon_114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="../../../docs/images/canjs_favicon_128x128.png">
		<link rel="apple-touch-icon" sizes="144x144" href="../../../docs/images/canjs_favicon_144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="../../../docs/images/canjs_favicon_152x152.png">
		<meta content="yes" name="apple-mobile-web-app-capable">
	  	<meta name="apple-mobile-web-app-status-bar-style" content="white-translucent">
	
	
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-2302003-11', 'auto');
			ga('send', 'pageview');
		</script>
	
</head>
	<body>
		<input type="checkbox" id="nav-trigger" class="nav-trigger"/>
	  	<div data-current-page="guides/recipes/file-navigator-advanced" id="everything">
  <div class="header">
    
	<label for="nav-trigger">Menu</label>
	<div class="brand">
		<div class="logo">
			<a href="../../../index.html" alt="CanJS"></a>
			<div class="dropdown project-dropdown">
				<a href="https://donejs.com/">DoneJS</a>
				<a href="https://stealjs.com/">StealJS</a>
				<a href="https://jquerypp.com/">jQuery++</a>
				<a href="https://funcunit.com/">FuncUnit</a>
				<a href="https://documentjs.com/">DocumentJS</a>
			</div>
		</div>
		<div class="version">
			<div class="version-number">
				5.33.3
			</div>
			<div class="dropdown version-dropdown">
				
					<a href="https://canjs.com">6.0.0</a>
				
					<a href="https://v4.canjs.com">4.3.0</a>
				
					<a href="https://v3.canjs.com">3.14.1</a>
				
					<a href="https://v2.canjs.com">2.3.35</a>
				
			</div>
		</div>
	</div>


	
	<ul class="top-right-links">
		
			
				
					<li class="">
						<a class="page"
							href="../../about.html"
							title="Learn about CanJS’s mission, technical highlights, who uses CanJS, and our future roadmap.">
							About
						</a>
					</li>
				
			
		
			
				
					<li class="current">
						<a class="page"
							href="../../guides.html"
							title="Welcome to CanJS! These guides are here to help you master CanJS development, get involved with the CanJS community, and contribute back to CanJS.">
							Guides
						</a>
					</li>
				
			
		
			
				
					<li class="">
						<a class="page"
							href="../../api.html"
							title="Welcome to the CanJS API documentation! This page is a CHEAT-SHEET for the most common APIs within CanJS. Read the technology-overview page for background on the following APIs.">
							API Docs
						</a>
					</li>
				
			
		
			
				
					<li class="">
						<a class="page"
							href="../../community.html"
							title="Get involved with one of the most inviting communities on the internet!">
							Community
						</a>
					</li>
				
			
		
			
				
					<li class="">
						<a class="page"
							href="../contribute.html"
							title="Learn how to contribute to CanJS!">
							Contributing
						</a>
					</li>
				
			
		
	</ul>



<div class="search-section">
	<div class="search-bar">
	<div class="search-wrap" style="display:none;">
		<span class="search-icon"></span>
		<input
			type="text"
			size="6"
			class="search"
			placeholder="Search"
			autocomplete="off"
			autocorrect="off"
			autocapitalize="none"
			spellcheck="false"/>
			<span class="search-icon-cancel"></span>
	</div>
</div>

	<div class="search-bar-container">
	</div>
	<div class="search-results-container">
	<div class="search-results-wrap"></div>
</div>

</div>
<ul class="top-right-bitovi">
	<li class="dropdown">
		<a href="https://www.bitovi.com" class="bitovi by-bitovi">Bitovi</a>
		<ul class="dropdown-menu">
			<li><a href="https://www.bitovi.com/">Bitovi.com</a></li>
			<li><a href="https://www.bitovi.com/blog">Blog</a></li>
			<li><a href="https://www.bitovi.com/design">Design</a></li>
			<li><a href="https://www.bitovi.com/development">Development</a></li>
			<li><a href="https://www.bitovi.com/training">Training</a></li>
			<li><a href="https://www.bitovi.com/open-source">Open Source</a></li>
			<li><a href="https://www.bitovi.com/about">About</a></li>
			<li><a href="https://www.bitovi.com/contact">Contact Us</a></li>
		</ul>
	</li>
</ul>

  </div>
  <div id="left" class="column">

      <div class="nav-menu">
        
            
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../about.html"
							title="Learn about CanJS’s mission, technical highlights, who uses CanJS, and our future roadmap.">
							About
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						parent
           						expanded">
						<a class="page"
							href="../../guides.html"
							title="Welcome to CanJS! These guides are here to help you master CanJS development, get involved with the CanJS community, and contribute back to CanJS.">
							Guides
						</a>
						
	<ul>
		
			
				
					<li>
						<span>getting started</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../crud-beginner.html"
							title="Learn how to build a basic CRUD app with CanJS in 30 minutes.">
							CRUD Guide
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../setup.html"
							title="Learn how to install CanJS in your environment.">
							Setting Up CanJS
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../technology-overview.html"
							title="Learn the basics of CanJS’s technology.">
							Technology Overview
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li>
						<span>topics</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../html.html"
							title="Learn how to update HTML and listen to user interactions.">
							HTML
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../routing.html"
							title="Learn how to make your application respond to changes in the URL and work with the browser’s back and forward buttons.">
							Routing
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../data.html"
							title="Learn how to use can-connect to integrate service layer APIs into your CanJS application.">
							Service Layer
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../debugging.html"
							title="Learn how to debug CanJS applications.">
							Debugging
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../forms.html"
							title="Learn how to create amazing &lt;form&gt;s with CanJS.">
							Forms
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../testing.html"
							title="Learn how to test CanJS applications.">
							Testing
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../logic.html"
							title="Learn how to write observables in an organized, maintainable, and testable way.">
							Logic
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../server-side-rendering.html"
							title="Learn how to set up SSR for CanJS.">
							Server-Side Rendering
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li>
						<span>app guides</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../chat.html"
							title="This guide will walk you through building a real-time chat application with CanJS’s Core libraries.  It takes about 30 minutes to complete.">
							Chat Guide
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../todomvc.html"
							title="This guide will walk you through building a slightly modified version of TodoMVC with CanJS’s Core libraries and can-fixture. It takes about 1 hour to complete.">
							TodoMVC Guide
						</a>
						

					</li>
				
			
		
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="todomvc-with-steal.html"
							title="This tutorial walks through building TodoMVC with StealJS. It includes KeyNote presentations covering CanJS core libraries.">
							TodoMVC with StealJS
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li>
						<span>beginner recipes</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="canvas-clock.html"
							title="This beginner guide walks you through building a clock with the Canvas API.">
							Canvas Clock
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="credit-card-simple.html"
							title="This beginner guide walks through building a very simple credit card payment form.  It uses Stripe.js v2 API to create a token which can be used to create a charge.  It also performs simple validation on the payment form values.">
							Credit Card
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="file-navigator-simple.html"
							title="This beginner guide walks you through building a simple file navigation widget.  It takes about 25 minutes to complete.  It was written with CanJS 5.22.0. Check out the file-navigator-advanced for an example that makes AJAX requests for its data and uses can-component.">
							File Navigator
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="signup-simple.html"
							title="This beginner guide walks through building simple signup, login forms and a logout button.">
							Signup and Login
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="video-player.html"
							title="This beginner guide walks you through building custom video controls around a video element.">
							Video Player
						</a>
						

					</li>
				
			
		
			
		
	</ul>


					</li>
				
			
		
			
				
					<li>
						<span>intermediate recipes</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="cta-bus-map.html"
							title="This intermediate guide walks you through showing Chicago Transit Authority (CTA) bus locations on a Google Map.   You&#x27;ll learn how to create a can-component that integrates with 3rd party widgets.">
							CTA Bus Map
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="modals.html"
							title="This intermediate guide shows how to create a multiple modal form.">
							Multiple Modals
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="text-editor.html"
							title="This intermediate guide walks you through building a basic rich text editor.">
							Text Editor
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="tinder-carousel.html"
							title="This intermediate guide walks you through building a Tinder-like carousel. Learn how to build apps that use dragging user interactions.">
							Tinder Carousel
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li>
						<span>advanced recipes</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="credit-card-advanced.html"
							title="This advanced guide walks through building a simple credit card payment form with validations. It doesn’t use can-define. Instead it uses Kefir.js streams to make a ViewModel. can-kefir is used to make the Kefir streams observable to can-stache.">
							Credit Card
						</a>
						

					</li>
				
			
		
			
				
					<li class="current
           						
           						expanded">
						<a class="page"
							href="file-navigator-advanced.html"
							title="This advanced guide walks you through building a file navigation widget that requests data with fetch. It takes about 45 minutes to complete.">
							File Navigator
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="playlist-editor.html"
							title="Learn how to use YouTube’s API to search for videos and make a playlist.  This makes authenticated requests with OAuth2. It uses jQuery++ for drag/drop events. It shows using custom attributes and custom events.  This advanced guide takes an hour to complete.  This recipe uses YouTube API Services and follows YouTube Terms of Service and Google Privacy Policy">
							Playlist Editor
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="search-list-details.html"
							title="This advanced guide walks through building a Search, List, Details flow with lazy-loaded routes.">
							Search, List, Details
						</a>
						

					</li>
				
			
		
			
		
	</ul>


					</li>
				
			
		
			
				
					<li>
						<span>upgrade</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../migrate-3.html"
							title="This guide walks you through the step-by-step process to upgrade a 2.x app to CanJS 3.">
							Migrating to CanJS 3
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../migrate-4.html"
							title="This guide walks you through the step-by-step process to upgrade a 3.x app to CanJS 4.">
							Migrating to CanJS 4
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../migrate-5.html"
							title="This guide walks you through the process to upgrade a 4.x app to CanJS 5.x.">
							Migrating to CanJS 5
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../upgrade/using-codemods.html"
							title="Learn how to migrate your app to CanJS 3 using can-migrate.">
							Using Codemods
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li>
						<span>other</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../api.html"
							title="This page walks through how to use and understand CanJS’s API documentation.">
							Reading the API Docs
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../api.html"
							title="Welcome to the CanJS API documentation! This page is a CHEAT-SHEET for the most common APIs within CanJS. Read the technology-overview page for background on the following APIs.">
							API Docs
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../community.html"
							title="Get involved with one of the most inviting communities on the internet!">
							Community
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../contribute.html"
							title="Learn how to contribute to CanJS!">
							Contributing
						</a>
						

					</li>
				
			
		
	</ul>


        
      </div>
      <div class="social-side-container">
        <ul class="social-side">
  <li>
    <a class="header-mobile github" href="https://github.com/canjs/canjs" target="_blank"><img class="social-icon-small" src="../../../docs/images/github.png">GitHub</a>
  </li>
  <li>
    <a class="header-mobile twitter" href="https://twitter.com/canjs" target="_blank"><img class="social-icon-small" src="../../../docs/images/twitter.png">Twitter</a>
  </li>
</ul>
<ul class="social-side">
  <li>
    <a class="header-mobile" href="https://www.bitovi.com/community/slack" target="_blank">Chat</a>
  </li>
  <li>
    <a class="header-mobile" href="https://forums.bitovi.com/c/canjs" target="_blank">Forum</a>
  </li>
</ul>
<ul class="social-side">
  <li>
    <a class="header-mobile" href="https://www.bitovi.com/blog/topic/canjs" target="_blank">News</a>
  </li>
  <li></li>
</ul>

      </div>
      <div class="by-bitovi-container">
        <a href="https://www.bitovi.com" target="_blank" class="bitovi by-bitovi">Bitovi</a>
      </div>

  </div>
  <div id="right" class="column">

      <article>
  <section class="title">
	<div class="page-type">
		<h1>File Navigator</h1>
			<ul class="title-social">
				
				
				<li>
					<a class="button-link" href="//github.com/canjs/canjs/edit/master/docs/can-guides/commitment/recipes/file-navigator/file-navigator-advanced.md">Edit on GitHub</a>
				</li>
				
			</ul>
	</div>
	<div class="clear-both"></div>
	
  
	<section class="description">
    <p>This advanced guide walks you through building a file navigation widget that requests data with fetch. It takes about 45 minutes to complete.</p>

</section>

  
	
</section>
<section class="on-this-page-table">
	<!--<h2 class="on-this-page-title" data-skip>Page Content</h2>-->
</section>










  
    <section class="body">
    <blockquote>
<p>Check out the <a href="file-navigator-simple.html" title="This beginner guide walks you through building a simple file navigation widget.  It takes about 25 minutes to complete.  It was written with
CanJS 5.22.0. Check out the file-navigator-advanced
for an example that makes AJAX requests for its data and uses can-component.">File Navigator</a>
for an example that doesn't make data requests.</p>
</blockquote>
<p>The final widget looks like:</p>
<p class="codepen" data-height="404" data-theme-id="0" data-default-tab="result" data-user="bitovi" data-slug-hash="EJNmyB" style="height: 404px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid black; margin: 1em 0; padding: 1em;" data-pen-title="File Navigator advanced [Finished]">
  <span>See the Pen <a href="https://codepen.io/bitovi/pen/EJNmyB/">
  File Navigator advanced [Finished]</a> by Bitovi (<a href="https://codepen.io/bitovi">@bitovi</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<blockquote>
<p><strong>Note:</strong> If you don’t see any files show up, run the CodePen again. This
CodePen uses randomly generated files, so it’s possible nothing shows up.</p>
</blockquote>
<p><strong>START THIS TUTORIAL BY CLICKING THE “EDIT ON CODEPEN” BUTTON IN THE TOP RIGHT CORNER OF THE FOLLOWING EMBED</strong>:</p>
<p class="codepen" data-height="136" data-theme-id="0" data-default-tab="js" data-user="bitovi" data-slug-hash="Pgbmwp" style="height: 136px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid black; margin: 1em 0; padding: 1em;" data-pen-title="File Navigator Guide (Advanced) [Starter]">
  <span>See the Pen <a href="https://codepen.io/bitovi/pen/Pgbmwp/">
  File Navigator Guide (Advanced) [Starter]</a> by Bitovi (<a href="https://codepen.io/bitovi">@bitovi</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p><br>
<p>This CodePen has initial prototype CSS and JS which is useful for
getting the application to look right.</p>
<p>The following sections are broken down into:</p>
<ul>
<li>Problem - A description of what the section is trying to accomplish.</li>
<li>Things to know - Information about CanJS that is useful for solving the problem.</li>
<li>Solution - The solution to the problem.</li>
</ul>
<h2>Build a service layer with fixtures</h2>
<h3>Problem</h3>
<p>Make an <code>/api/entities</code> service layer that provides the files and folders for another folder.  An <code>entity</code> can be either a file or folder.  A single <code>entity</code> looks like:</p>
<pre><code class="language-js">{
  id: &quot;2&quot;,
  name: &quot;dogs&quot;,
  parentId: &quot;0&quot;,     // The id of the folder this file or folder is within.
  type: &quot;folder&quot;,    // or &quot;file&quot;,
  hasChildren: true  // false for a folder with no children, or a file
}
</code></pre>
<p>To get the list of files and folders within a given folder, a <code>GET</code> request should be made as follows:</p>
<pre><code>GET /api/entities?folderId=0
</code></pre>
<p>This should return the list of folders and files directly within that folder like:</p>
<pre><code class="language-js">{
  data: [
   { id: &quot;7&quot;, name: &quot;pekingese.png&quot;, parentId: &quot;0&quot;, type: &quot;file&quot;,   hasChildren: false },
   { id: &quot;8&quot;, name: &quot;poodles&quot;,       parentId: &quot;0&quot;, type: &quot;folder&quot;, hasChildren: false },
   { id: &quot;9&quot;, name: &quot;hounds&quot;,        parentId: &quot;0&quot;, type: &quot;folder&quot;, hasChildren: true }
  ]
}
</code></pre>
<p>The first level files and folders should have a <code>parentId</code> of <code>&quot;0&quot;</code>.</p>
<h3>Things to know</h3>
<ul>
<li><p><a href="../../can-fixture.html" title="Intercept AJAX requests and simulate the response.">can-fixture</a> is used to trap AJAX requests like:</p>
<pre><code class="language-js">fixture(&quot;/api/entities&quot;, function(request) {
  // request.data.folderId -&gt; &quot;1&quot;
  return {data: [
    // ...
  ]}
})
</code></pre></li>
<li><p><a href="../../can-fixture.store.html" title="Creates a store.">store</a> can be used to automatically filter records using the query string:</p>
<pre><code class="language-js">const entities = [
  // ...
];
const entitiesStore = fixture.store( entities );
fixture(&quot;/api/entities&quot;, entitiesStore);
</code></pre></li>
<li><p><a href="../../can-fixture.rand.html" title="Returns a random integer.">rand</a> can be used to create a random integer:</p>
<pre><code class="language-js">fixture.rand(10) //-&gt; 10
fixture.rand(10) //-&gt; 0
</code></pre></li>
</ul>
<h3>Solution</h3>
<p>Update the <strong>JavaScript</strong> tab to:</p>
<ul>
<li><p>Make a function that generates an array of <code>entities</code> that will be
stored on our fake server.</p></li>
<li><p>Make those entities, create a <code>store</code> to house them, and trap AJAX
requests to use that <code>store</code>:</p></li>
</ul>
<pre><code class="language-js">import { fixture } from &quot;//unpkg.com/can@5/core.mjs&quot;;

// Stores the next entity id to use.
let entityId = 1;

// Returns an array of entities for the given `parentId`.
// Makes sure the `depth` of entities doesn’t exceed 5.
const makeEntities = function(parentId, depth) {
  if (depth &gt; 5) {
    return [];
  }
  // The number of entities to create.
  const entitiesCount = fixture.rand(10);

  // The array of entities we will return.
  const entities = [];

  for (let i = 0; i &lt; entitiesCount; i++) {

    // The id for this entity
    const id = &quot;&quot; + (entityId++);

    // If the entity is a folder or file
    const isFolder = Math.random() &gt; 0.3;

    // The children for this folder.
    const children = isFolder ? makeEntities(id, depth+1) : [];

    const entity = {
      id: id,
      name: (isFolder ? &quot;Folder&quot; : &quot;File&quot;) + &quot; &quot; + id,
      parentId: parentId,
      type: (isFolder ? &quot;folder&quot; : &quot;file&quot;),
      hasChildren: children.length &gt; 0
    };
    entities.push(entity);

    // Add the children of a folder
    [].push.apply(entities,  children)

  }
  return entities;
};

// Make the entities for the demo
const entities = makeEntities(&quot;0&quot;, 0);

// Add them to a client-like DB store
const entitiesStore = fixture.store(entities);

// Trap requests to /api/entities to read items from the entities store.
fixture(&quot;/api/entities&quot;, entitiesStore);

// Make requests to /api/entities take 1 second
fixture.delay = 1000;
</code></pre>
<div line-highlight='3-55,only'></div>
<h2>Create the <code>Entity</code> Model</h2>
<h3>The problem</h3>
<p>When we load entities from the server, it’s useful to convert them into <code>Entity</code> type instances.  We will want to create an observable <code>Entity</code> type using <a href="../../can-define/map/map.html" title="Create observable objects.">can-define/map/map</a> so we can do:</p>
<pre><code class="language-js">const entity = new Entity({
  id: &quot;2&quot;,
  name: &quot;dogs&quot;,
  parentId: &quot;0&quot;,     // The id of the folder this file or folder is within.
  type: &quot;folder&quot;,    // or &quot;file&quot;,
  hasChildren: true  // false for a folder with no children, or a file
});

entity.on(&quot;name&quot;, function(ev, newName) {
  console.log(&quot;entity name changed to &quot;, newName);
});

entity.name = &quot;cats&quot; //-&gt; logs &quot;entity name changed to cats&quot;
</code></pre>
<h3>Things to know</h3>
<p>You can create a <a href="../../can-define/map/map.html" title="Create observable objects.">DefineMap</a> type using <a href="../../can-define/map/map.extend.html" title="Define a custom map type.">DefineMap.extend</a> with the type’s properties and the properties’ types like:</p>
<pre><code class="language-js">import { DefineMap } from &quot;can&quot;;
const Type = DefineMap.extend({
  id: &quot;string&quot;,
  hasChildren: &quot;boolean&quot;,
  // ...
});
</code></pre>
<h3>The solution</h3>
<p>Extend <a href="../../can-define/map/map.html" title="Create observable objects.">DefineMap</a> with each property and its type as follows:</p>
<pre><code class="language-js">import { DefineMap, fixture } from &quot;//unpkg.com/can@5/core.mjs&quot;;

// Stores the next entity id to use.
let entityId = 1;

// Returns an array of entities for the given `parentId`.
// Makes sure the `depth` of entities doesn’t exceed 5.
const makeEntities = function(parentId, depth) {
  if (depth &gt; 5) {
    return [];
  }
  // The number of entities to create.
  const entitiesCount = fixture.rand(10);

  // The array of entities we will return.
  const entities = [];

  for (let i = 0; i &lt; entitiesCount; i++) {

    // The id for this entity
    const id = &quot;&quot; + (entityId++);

    // If the entity is a folder or file
    const isFolder = Math.random() &gt; 0.3;

    // The children for this folder.
    const children = isFolder ? makeEntities(id, depth+1) : [];

    const entity = {
      id: id,
      name: (isFolder ? &quot;Folder&quot; : &quot;File&quot;) + &quot; &quot; + id,
      parentId: parentId,
      type: (isFolder ? &quot;folder&quot; : &quot;file&quot;),
      hasChildren: children.length &gt; 0
    };
    entities.push(entity);

    // Add the children of a folder
    [].push.apply(entities,  children)

  }
  return entities;
};

// Make the entities for the demo
const entities = makeEntities(&quot;0&quot;, 0);

// Add them to a client-like DB store
const entitiesStore = fixture.store(entities);

// Trap requests to /api/entities to read items from the entities store.
fixture(&quot;/api/entities&quot;, entitiesStore);

// Make requests to /api/entities take 1 second
fixture.delay = 1000;

const Entity = DefineMap.extend({
  id: {type: &quot;string&quot;, identity: true},
  name: &quot;string&quot;,
  parentId: &quot;string&quot;,
  hasChildren: &quot;boolean&quot;,
  type: &quot;string&quot;
});
</code></pre>
<div line-highlight='1,57-63,only'></div>
<h2>Connect the <code>Entity</code> model to the service layer</h2>
<h3>The problem</h3>
<p>We want to be able to load a list of <code>Entity</code> instances from <code>GET /api/entities</code> with:</p>
<pre><code class="language-js">Entity.getList({parentId: &quot;0&quot;}).then(function(entities) {
    console.log(entities.get()) //-&gt; [ Entity{id: &quot;1&quot;, parentId: &quot;0&quot;, ...}, ...]
});
</code></pre>
<h3>Things to know</h3>
<p><a href="../../can-rest-model.html" title="Connect a type to a restful service layer.">restModel()</a> can connect a <code>Map</code> type to
a <code>url</code> like:</p>
<pre><code class="language-js">restModel({
  Map: Entity,
  url: &quot;URL&quot;
});
</code></pre>
<h3>The solution</h3>
<p>Use <code>restModel</code> to connect <code>Entity</code> to <code>/api/entities</code> like:</p>
<pre><code class="language-js">import { DefineMap, fixture, restModel } from &quot;//unpkg.com/can@5/core.mjs&quot;;

// Stores the next entity id to use.
let entityId = 1;

// Returns an array of entities for the given `parentId`.
// Makes sure the `depth` of entities doesn’t exceed 5.
const makeEntities = function(parentId, depth) {
    if (depth &gt; 5) {
        return [];
    }
    // The number of entities to create.
    const entitiesCount = fixture.rand(10);

    // The array of entities we will return.
    const entities = [];

    for (let i = 0; i &lt; entitiesCount; i++) {

        // The id for this entity
        const id = &quot;&quot; + (entityId++);

        // If the entity is a folder or file
        const isFolder = Math.random() &gt; 0.3;

        // The children for this folder.
        const children = isFolder ? makeEntities(id, depth + 1) : [];

        const entity = {
            id: id,
            name: (isFolder ? &quot;Folder&quot; : &quot;File&quot;) + &quot; &quot; + id,
            parentId: parentId,
            type: (isFolder ? &quot;folder&quot; : &quot;file&quot;),
            hasChildren: children.length &gt; 0
        };
        entities.push(entity);

        // Add the children of a folder
        [].push.apply(entities, children)

    }
    return entities;
};

// Make the entities for the demo
const entities = makeEntities(&quot;0&quot;, 0);

// Add them to a client-like DB store
const entitiesStore = fixture.store(entities);

// Trap requests to /api/entities to read items from the entities store.
fixture(&quot;/api/entities&quot;, entitiesStore);

// Make requests to /api/entities take 1 second
fixture.delay = 1000;

const Entity = DefineMap.extend({
  id: {type: &quot;string&quot;, identity: true},
  name: &quot;string&quot;,
  parentId: &quot;string&quot;,
  hasChildren: &quot;boolean&quot;,
  type: &quot;string&quot;
});

Entity.connection = restModel({
  Map: Entity,
  url: &quot;/api/entities&quot;
});
</code></pre>
<div line-highlight='1,65-68,only'></div>
<h2>Create the ROOT entity and render it</h2>
<h3>The problem</h3>
<p>We need to begin converting the static HTML the designer gave us into live HTML.  This means
rendering it in a template.  We’ll start slow by rendering the <code>root</code> parent folder’s name
in the same way it’s expected by the designer.</p>
<h3>Things to know</h3>
<ul>
<li><p>CanJS <a href="../../can-component.html" title="Create a custom element that can be used to manage widgets or application logic.">Component</a> uses <a href="../../can-stache.html" title="Live binding templates.">can-stache</a> to render data in a template
and keep it live.  Templates can be authored in <code>view</code> property like:</p>
<pre><code class="language-js">import { Component } from &quot;can&quot;;

Component.extend({
  tag: 'my-component',
  view: `TEMPLATE CONTENT`,
  ViewModel: {}
});
</code></pre>
<p>A <a href="../../can-stache.html" title="Live binding templates.">can-stache</a> template uses
<a href="../../can-stache.tags.escaped.html" title="Insert the value of the expression into the output of the template.">{{key}}</a> magic tags to insert data into
the HTML output like:</p>
<pre><code class="language-js">import { Component } from &quot;can&quot;;

Component.extend({
  tag: 'my-component',
  view: `{{something.name}}`,
  ViewModel: {}
});
</code></pre></li>
<li><p>Mount the component into the page with it's custom tag:</p>
<pre><code class="language-html">&lt;my-component /&gt;
</code></pre></li>
<li><p>You can create an <code>Entity</code> instance as follows:</p>
<pre><code class="language-js">const folder = new Entity({/*...*/});
</code></pre>
<p>Where <code>{/*...*/}</code> is an object of the properties you need to create like <code>{id: &quot;0&quot;, name: &quot;ROOT&quot;, ...}</code>.
Pass this to the template.</p></li>
</ul>
<h3>The solution</h3>
<p>Update the <strong>HTML</strong> tab to render the <code>folder</code>’s name.</p>
<pre><code class="language-html">&lt;a-folder id=&quot;root&quot;&gt;&lt;/a-folder&gt;
</code></pre>
<div line-highlight='2'></div>
<p>Update the <strong>JavaScript</strong> tab to:</p>
<ol>
<li>Define a component with <code>a-folder</code> custom tag</li>
<li>Write the component view template that displays the <code>folder</code> <code>Entity</code> <code>name</code>.</li>
<li>Write the component <code>ViewModel</code> that has the following properties:</li>
</ol>
<ul>
<li><code>folder</code> which references the folder being displayed.</li>
<li><code>entitiesPromise</code> which will be a promise of all files for that folder.</li>
</ul>
<ol start="4">
<li>Set the component <code>ViewModel</code> values with <a href="../../can-view-model.html" title="Gets the ViewModel of an element.">can-view-model</a> <code>set</code> function</li>
</ol>
<pre><code class="language-js">import { Component, DefineMap, fixture, restModel } from &quot;//unpkg.com/can@5/core.mjs&quot;;

// Stores the next entity id to use.
let entityId = 1;

// Returns an array of entities for the given `parentId`.
// Makes sure the `depth` of entities doesn’t exceed 5.
const makeEntities = function(parentId, depth) {
  if (depth &gt; 5) {
    return [];
  }
  // The number of entities to create.
  const entitiesCount = fixture.rand(10);

  // The array of entities we will return.
  const entities = [];

  for (let i = 0; i &lt; entitiesCount; i++) {

    // The id for this entity
    const id = &quot;&quot; + (entityId++);

    // If the entity is a folder or file
    const isFolder = Math.random() &gt; 0.3;

    // The children for this folder.
    const children = isFolder ? makeEntities(id, depth+1) : [];

    const entity = {
      id: id,
      name: (isFolder ? &quot;Folder&quot; : &quot;File&quot;) + &quot; &quot; + id,
      parentId: parentId,
      type: (isFolder ? &quot;folder&quot; : &quot;file&quot;),
      hasChildren: children.length &gt; 0
    };
    entities.push(entity);

    // Add the children of a folder
    [].push.apply(entities,  children)

  }
  return entities;
};

// Make the entities for the demo
const entities = makeEntities(&quot;0&quot;, 0);

// Add them to a client-like DB store
const entitiesStore = fixture.store(entities);

// Trap requests to /api/entities to read items from the entities store.
fixture(&quot;/api/entities&quot;, entitiesStore);

// Make requests to /api/entities take 1 second
fixture.delay = 1000;

const Entity = DefineMap.extend({
  id: {type: &quot;string&quot;, identity: true},
  name: &quot;string&quot;,
  parentId: &quot;string&quot;,
  hasChildren: &quot;boolean&quot;,
  type: &quot;string&quot;
});

Entity.connection = restModel({
  Map: Entity,
  url: &quot;/api/entities&quot;
});

Component.extend({
  tag: &quot;a-folder&quot;,
  view: `
    &lt;span&gt;{{ this.folder.name }}&lt;/span&gt;
  `,
  ViewModel: {
    folder: Entity
  }
});

root.viewModel.assign({
  folder: new Entity({
    id: &quot;0&quot;,
    name: &quot;ROOT/&quot;,
    hasChildren: true,
    type: &quot;folder&quot;
  })
});

</code></pre>
<div line-highlight='1,70-78,80-87,only'></div>
<h2>Render the ROOT entities children</h2>
<h3>The problem</h3>
<p>In this section, we’ll list the files and folders within the root folder.</p>
<h3>Things to know</h3>
<ul>
<li>Use <a href="../../can-stache.helpers.if.html" title="can-stache.helpers.if">{{#if(value)}}</a> to do <code>if/else</code> branching in <a href="../../can-stache.html" title="Live binding templates.">can-stache</a>.</li>
<li>Use <a href="../../can-stache.helpers.for-of.html" title="Loop through a list of values.">{{#for(of)}}</a> to do looping in <a href="../../can-stache.html" title="Live binding templates.">can-stache</a>.</li>
<li>Use <a href="../../can-stache.helpers.is.html" title="">{{#eq(value1, value2)}}</a> to test equality in <a href="../../can-stache.html" title="Live binding templates.">can-stache</a>.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promises</a> are observable in <a href="../../can-stache.html" title="Live binding templates.">can-stache</a>.  Given a promise <code>somePromise</code>, you can:
<ul>
<li>Check if the promise is loading like: <code>{{#if(somePromise.isPending)}}</code>.</li>
<li>Loop through the resolved value of the promise like: <code>{{#for(item of somePromise.value)}}</code>.</li>
</ul></li>
<li>Write <code>&lt;div class=&quot;loading&quot;&gt;Loading&lt;/div&gt;</code> when files are loading.</li>
<li>Write a <code>&lt;ul&gt;</code> to contain all the files.  Within the <code>&lt;ul&gt;</code> there should be:
<ul>
<li>An <code>&lt;li&gt;</code> with a class attribute that includes <code>file</code> or <code>folder</code> and <code>hasChildren</code> if the folder has children.</li>
<li>The <code>&lt;li&gt;</code> should have <code>📝 &lt;span&gt;{{FILE_NAME}}&lt;/span&gt;</code> if a file and <code>📁 &lt;span&gt;{{FOLDER_NAME}}&lt;/span&gt;</code> if a folder.</li>
</ul></li>
</ul>
<h3>The solution</h3>
<p>Update the <strong>JavaScript</strong> tab to:</p>
<ul>
<li><p>Add <code>entitiesPromise</code> property to the <code>ViewModel</code>.  <code>entitiesPromise</code>
will contain the files and folders that are directly within the root folder.</p></li>
<li><p>Use <code>entitiesPromise</code> to write <code>&lt;div class=&quot;loading&quot;&gt;Loading&lt;/div&gt;</code> while
the promise is pending, and then writes out an <code>&lt;li&gt;</code> for each entity in the resolved <code>entitiesPromise</code></p></li>
</ul>
<pre><code class="language-js">import { Component, DefineMap, fixture, restModel } from &quot;//unpkg.com/can@5/core.mjs&quot;;

// Stores the next entity id to use.
let entityId = 1;

// Returns an array of entities for the given `parentId`.
// Makes sure the `depth` of entities doesn’t exceed 5.
const makeEntities = function(parentId, depth) {
  if (depth &gt; 5) {
    return [];
  }
  // The number of entities to create.
  const entitiesCount = fixture.rand(10);

  // The array of entities we will return.
  const entities = [];

  for (let i = 0; i &lt; entitiesCount; i++) {

    // The id for this entity
    const id = &quot;&quot; + (entityId++);

    // If the entity is a folder or file
    const isFolder = Math.random() &gt; 0.3;

    // The children for this folder.
    const children = isFolder ? makeEntities(id, depth+1) : [];

    const entity = {
      id: id,
      name: (isFolder ? &quot;Folder&quot; : &quot;File&quot;) + &quot; &quot; + id,
      parentId: parentId,
      type: (isFolder ? &quot;folder&quot; : &quot;file&quot;),
      hasChildren: children.length &gt; 0
    };
    entities.push(entity);

    // Add the children of a folder
    [].push.apply(entities,  children)

  }
  return entities;
};

// Make the entities for the demo
const entities = makeEntities(&quot;0&quot;, 0);

// Add them to a client-like DB store
const entitiesStore = fixture.store(entities);

// Trap requests to /api/entities to read items from the entities store.
fixture(&quot;/api/entities&quot;, entitiesStore);

// Make requests to /api/entities take 1 second
fixture.delay = 1000;

const Entity = DefineMap.extend({
  id: {type: &quot;string&quot;, identity: true},
  name: &quot;string&quot;,
  parentId: &quot;string&quot;,
  hasChildren: &quot;boolean&quot;,
  type: &quot;string&quot;
});

Entity.connection = restModel({
  Map: Entity,
  url: &quot;/api/entities&quot;
});

Component.extend({
  tag: &quot;a-folder&quot;,
  view: `
    &lt;span&gt;{{ this.folder.name }}&lt;/span&gt;
    {{# if(this.entitiesPromise.isPending) }}
      &lt;div class=&quot;loading&quot;&gt;Loading&lt;/div&gt;
    {{ else }}
      &lt;ul&gt;
        {{# for(entity of this.entitiesPromise.value) }}
          &lt;li class=&quot;{{entity.type}} {{# if(entity.hasChildren) }}hasChildren{{/ if }}&quot;&gt;
            {{# eq(entity.type, 'file') }}
              📝 &lt;span&gt;{{ entity.name }}&lt;/span&gt;
            {{ else }}
              📁 &lt;span&gt;{{ entity.name }}&lt;/span&gt;
            {{/ eq }}
          &lt;/li&gt;
        {{/ for }}
      &lt;/ul&gt;
    {{/ if }}
  `,
  ViewModel: {
    folder: Entity,
    get entitiesPromise() {
      if (this.folder) {
        return Entity.getList({ filter: { parentId: this.folder.id }});
      }
    }
  }
});

root.viewModel.assign({
  folder: new Entity({
    id: &quot;0&quot;,
    name: &quot;ROOT/&quot;,
    hasChildren: true,
    type: &quot;folder&quot;
  })
});

</code></pre>
<div line-highlight='74-88,92-96,only'></div>
<h2>Manage <code>&lt;a-folder&gt;</code> custom element behavior</h2>
<h3>The problem</h3>
<p>Now we want to make all the folders able to open and close.</p>
<h3>Things to know</h3>
<ul>
<li><p>CanJS uses <a href="../technology-overview.html#Key_ValueObservables" title="Learn the basics of CanJS’s technology.">ViewModels</a> to manage the behavior
of views.  ViewModels can have their own state, such as if a folder <code>isOpen</code> and should be showing
its children. <code>ViewModels</code> are constructor functions created with <a href="../../can-define/map/map.html" title="Create observable objects.">DefineMap</a>.</p></li>
<li><p><a href="../../can-define/map/map.html" title="Create observable objects.">DefineMap</a> can detail the type of a property with another type like:</p>
<pre><code class="language-js">import { DefineMap } from &quot;can&quot;;
const Address = DefineMap.extend({
  street: &quot;string&quot;,
  city: &quot;string&quot;
});
const Person = DefineMap.extend({
  address: Address
});
</code></pre></li>
<li><p><a href="../../can-define/map/map.html" title="Create observable objects.">DefineMap</a> can also specify default values:</p>
<pre><code class="language-js">const Person = DefineMap.extend({
  address: Address,
  age: {default: 33}
});
</code></pre></li>
<li><p><a href="../../can-define/map/map.html" title="Create observable objects.">DefineMap</a> can also specify a default value and a type:</p>
<pre><code class="language-js">const Person = DefineMap.extend({
  address: Address,
  age: {default: 33, type: &quot;number&quot;}
});
</code></pre></li>
<li><p><a href="../../can-define/map/map.html" title="Create observable objects.">DefineMap</a> can also have methods:</p>
<pre><code class="language-js">const Person = DefineMap.extend({
  address: Address,
  age: {default: 33, type: &quot;number&quot;},
  birthday: function() {
    this.age++;
  }
});
</code></pre></li>
<li><p>Use <a href="../../can-stache-bindings.event.html" title="Respond to events on elements or component ViewModels.">on:event</a> to listen to an event on an element and call a method in <a href="../../can-stache.html" title="Live binding templates.">can-stache</a>.  For example, the following calls <code>doSomething()</code> when the <code>&lt;div&gt;</code> is clicked.</p>
<pre><code class="language-html">&lt;div on:click=&quot;doSomething()&quot;&gt; ... &lt;/div&gt;
</code></pre></li>
</ul>
<h3>The solution</h3>
<p>The following:</p>
<ol start="3">
<li>Define <code>ViewModel</code> properties that will manage the UI state around a folder.:
<ul>
<li><code>isOpen</code> which tracks if the folder’s children should be displayed.</li>
<li><code>toggleOpen</code> which changes <code>isOpen</code>.</li>
</ul></li>
<li>Recursively renders each child folder with <code>&lt;a-folder folder:from=&quot;entity&quot; /&gt;</code>.</li>
<li>Set the root folder <code>isOpen</code> property to <code>true</code> in the <code>ViewModel</code> mounting invocation (<code>root.viewModel.assign</code>).</li>
</ol>
<pre><code class="language-js">import { Component, DefineMap, fixture, restModel } from &quot;//unpkg.com/can@5/core.mjs&quot;;

// Stores the next entity id to use.
let entityId = 1;

// Returns an array of entities for the given `parentId`.
// Makes sure the `depth` of entities doesn’t exceed 5.
const makeEntities = function(parentId, depth) {
  if (depth &gt; 5) {
    return [];
  }
  // The number of entities to create.
  const entitiesCount = fixture.rand(10);

  // The array of entities we will return.
  const entities = [];

  for (let i = 0; i &lt; entitiesCount; i++) {

    // The id for this entity
    const id = &quot;&quot; + (entityId++);

    // If the entity is a folder or file
    const isFolder = Math.random() &gt; 0.3;

    // The children for this folder.
    const children = isFolder ? makeEntities(id, depth+1) : [];

    const entity = {
      id: id,
      name: (isFolder ? &quot;Folder&quot; : &quot;File&quot;) + &quot; &quot; + id,
      parentId: parentId,
      type: (isFolder ? &quot;folder&quot; : &quot;file&quot;),
      hasChildren: children.length &gt; 0
    };
    entities.push(entity);

    // Add the children of a folder
    [].push.apply(entities,  children)

  }
  return entities;
};

// Make the entities for the demo
const entities = makeEntities(&quot;0&quot;, 0);

// Add them to a client-like DB store
const entitiesStore = fixture.store(entities);

// Trap requests to /api/entities to read items from the entities store.
fixture(&quot;/api/entities&quot;, entitiesStore);

// Make requests to /api/entities take 1 second
fixture.delay = 1000;

const Entity = DefineMap.extend({
  id: {type: &quot;string&quot;, identity: true},
  name: &quot;string&quot;,
  parentId: &quot;string&quot;,
  hasChildren: &quot;boolean&quot;,
  type: &quot;string&quot;
});

Entity.connection = restModel({
  Map: Entity,
  url: &quot;/api/entities&quot;
});

Component.extend({
  tag: &quot;a-folder&quot;,
  view: `
    &lt;span on:click=&quot;this.toggleOpen()&quot;&gt;{{ this.folder.name }}&lt;/span&gt;
    {{# if(this.isOpen) }}
      {{# if(this.entitiesPromise.isPending) }}
        &lt;div class=&quot;loading&quot;&gt;Loading&lt;/div&gt;
      {{ else }}
        &lt;ul&gt;
          {{# for(entity of this.entitiesPromise.value) }}
            &lt;li class=&quot; {{entity.type}}
                        {{# if(entity.hasChildren) }}hasChildren{{/ if }}&quot;&gt;
              {{# eq(entity.type, 'file') }}
                📝 &lt;span&gt;{{ entity.name }}&lt;/span&gt;
              {{ else }}
                📁 &lt;a-folder folder:from=&quot;entity&quot; /&gt;
              {{/ eq }}
            &lt;/li&gt;
          {{/ for }}
        &lt;/ul&gt;
      {{/ if }}
    {{/ if }}
  `,
  ViewModel: {
    folder: Entity,
    isOpen: {type: &quot;boolean&quot;, default: false},
    get entitiesPromise() {
      if (this.folder) {
        return Entity.getList({ filter: { parentId: this.folder.id }});
      }
    },
    toggleOpen: function() {
      this.isOpen = !this.isOpen;
    }
  }
});

root.viewModel.assign({
  isOpen: true,
  folder: new Entity({
    id: &quot;0&quot;,
    name: &quot;ROOT/&quot;,
    hasChildren: true,
    type: &quot;folder&quot;
  })
});

</code></pre>
<div line-highlight='73-74,85,91,95,101-103,only'></div>
<h2>Result</h2>
<p>When complete, you should have a working file-navigation widget
like the following CodePen:</p>
<p class="codepen" data-height="404" data-theme-id="0" data-default-tab="result" data-user="bitovi" data-slug-hash="EJNmyB" style="height: 404px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid black; margin: 1em 0; padding: 1em;" data-pen-title="File Navigator advanced [Finished]">
  <span>See the Pen <a href="https://codepen.io/bitovi/pen/EJNmyB/">
  File Navigator advanced [Finished]</a> by Bitovi (<a href="https://codepen.io/bitovi">@bitovi</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>

</section>

  


<script type="text/javascript">
  window.docObject = {"src":{"path":"docs/can-guides/commitment/recipes/file-navigator/file-navigator-advanced.md"},"description":"This advanced guide walks you through building a file navigation widget that requests data with fetch. It takes about 45 minutes to complete.\n\n\n","name":"guides/recipes/file-navigator-advanced","title":"File Navigator","type":"page","parent":"guides/recipes/advanced","comment":" ","pathToRoot":"../../.."};
</script>
</article>
      
        <footer><p>CanJS is part of <a href="https://donejs.com" target="_blank">DoneJS</a>. Created and maintained by the core <a href="https://donejs.com/About.html#team" target="_blank">DoneJS team</a> and <a href="https://www.bitovi.com" target="_blank">Bitovi</a>. <strong>Currently 5.33.3.</strong></p>
</footer>
      

  </div>
  <div id="toc-sidebar" class="column">
    <nav>
      <h1 class="hide">On this page</h1>
    </nav>
    <div class="get-help">
      <h1>Get help</h1>
      <ul>
        <li><a href="https://www.bitovi.com/community/slack" target="_blank" class="icon-slack">Chat with us</a></li>
        <li><a href="https://github.com/canjs/canjs/issues/new" target="_blank" class="icon-github">File an issue</a></li>
        <li><a href="https://forums.bitovi.com/c/canjs" target="_blank" class="icon-forums">Ask questions</a></li>
        <li><a href="https://www.bitovi.com/blog/topic/canjs" target="_blank" class="icon-blog">Read latest news</a></li>
      </ul>
    </div>
  </div>
</div>

		
			<script>
				steal = {
				  	instantiated: {
				    	"bundles/bit-docs-site/static.css!$css" : null
				  	}
			  	};
			</script>
			<script type='text/javascript' data-main="bit-docs-site/static" src="../../static/steal.production.js"></script>
		
		<script async defer src="https://buttons.github.io/buttons.js"></script>

		<!-- root-level elements with attributes necessary for the app -->
		<div path-prefix="../.."></div>

	</body>
</html>
